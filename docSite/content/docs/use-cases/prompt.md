---
title: "提示词 & 引用提示词"
description: "FastGPT 提示词 & 引用提示词说明"
icon: "sign_language"
draft: false
toc: true
weight: 310
---

限定词从 V4.4.3 版本后去除，被“引用提示词”和“引用模板”替代。

# AI 对话消息组成

传递给 AI 模型的消息是一个数组，FastGPT 中这个数组的组成形式为：

```json
[
    内置提示词（config.json 配置，一般为空）
    提示词 （用户输入的提示词）
    历史记录
    问题（会由输入的问题、引用提示词和引用模板来决定）
]
```

{{% alert icon="🍅" context="success" %}}
Tips: 可以通过点击上下文按键查看完整的
{{% /alert %}}

# 引用模板和提示词设计

知识库采用 QA 对的格式存储，在转义成字符串时候会根据**引用模板**来进行格式化。知识库包含 3 个变量： q,a 和 source，可以通过 {{q}} {{a}} {{source}} 按需引入。下面一个模板例子：

**引用模板**

```
{instruction:"{{q}}",output:"{{a}}",source:"{{source}}"}
```

搜索到的知识库，会自动将 q,a,source 替换成对应的内容。每条搜索到的内容，会通过 `\n` 隔开。例如：
```
{instruction:"电影《铃芽之旅》的导演是谁？",output:"电影《铃芽之旅》的导演是新海诚。",source:"手动输入"}
{instruction:"本作的主人公是谁？",output:"本作的主人公是名叫铃芽的少女。",source:""}
{instruction:"电影《铃芽之旅》男主角是谁？",output:"电影《铃芽之旅》男主角是宗像草太，由松村北斗配音。",source:""}
{instruction:"电影《铃芽之旅》的编剧是谁？22",output:"新海诚是本片的编剧。",source:"手动输入"}
```

**引用提示词**

引用模板需要和引用提示词一起使用，提示词中可以写引用模板的格式说明以及对话的要求等。可以使用 {{quote}} 来使用 **引用模板**，使用 {{question}} 来引入问题。例如：

```
你的背景知识:
"""
{{quote}}
"""
对话要求：
1. 背景知识是最新的，其中 instruction 是相关介绍，output 是预期回答或补充。
2. 使用背景知识回答问题。
3. 背景知识无法回答问题时，你可以礼貌的的回答用户问题。
我的问题是:"{{question}}"
```


# 提示词案例

## 仅回复知识库里的内容

**引用提示词**里添加：
```
你的背景知识:
"""
{{quote}}
"""
对话要求：
1. 回答前，请先判断背景知识是否足够回答问题，如果无法回答，请直接回复：“对不起，我无法回答你的问题~”。
2. 背景知识是最新的，其中 instruction 是相关介绍，output 是预期回答或补充。
3. 使用背景知识回答问题。
我的问题是:"{{question}}"
```

## 说明引用来源

**引用模板:**

```
{instruction:"{{q}}",output:"{{a}}",source:"{{source}}"}
```

**引用提示词：**

```
你的背景知识:
"""
{{quote}}
"""
对话要求：
1. 背景知识是最新的，其中 instruction 是相关介绍，output 是预期回答或补充，source是背景来源。
2. 使用背景知识回答问题。
3. 在回答问题后，你需要给出本次回答对应的背景来源，来源展示格式如下：

“
这是AI作答。本次知识来源：
1. source1
2. source2
......
”

我的问题是:"{{question}}"
```
