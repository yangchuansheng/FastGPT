<!doctype html><html lang=zh-cn><head><meta charset=utf-8><title>分享链接身份鉴权 | FastGPT</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="FastGPT 分享链接身份鉴权"><meta name=keywords content="Documentation,Hugo,Hugo Theme,Bootstrap"><meta name=author content="Colin Wilson - Lotus Labs"><meta name=email content="support@aigis.uk"><meta name=website content="https://lotusdocs.dev"><meta name=Version content="v0.1.0"><link rel=icon href=/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=/site.webmanifest><meta property="og:title" content="分享链接身份鉴权"><meta property="og:description" content="FastGPT 分享链接身份鉴权"><meta property="og:type" content="article"><meta property="og:url" content="/docs/development/openapi/share/"><meta property="og:image" content="/opengraph/card-base-2_hu06b1a92291a380a0d2e0ec03dab66b2f_17642_filter_11424993707646542300.png"><meta property="article:section" content="docs"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/opengraph/card-base-2_hu06b1a92291a380a0d2e0ec03dab66b2f_17642_filter_11424993707646542300.png"><meta name=twitter:title content="分享链接身份鉴权"><meta name=twitter:description content="FastGPT 分享链接身份鉴权"><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=preconnect href=https://gstatic.loli.net/><link rel=preconnect href=https://gstatic.loli.net/ crossorigin><link href="https://fonts.loli.net/css?family=Inter:300,400,600,700|Fira+Code:500,700|JetBrains+Mono:500,700&display=block" rel=stylesheet><link rel=stylesheet href=/docs/scss/style.min.87ea930383068c675adc6eb7844d10874b234df79e6ecc52db8c85742a10290aa3f24ec143e18faf0885210bc2aced19.css integrity=sha384-h+qTA4MGjGda3G63hE0Qh0sjTfeebsxS24yFdCoQKQqj8k7BQ+GPrwiFIQvCrO0Z crossorigin=anonymous><script defer type=text/javascript src=/js/jsdelivr-auto-fallback.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.us/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css></head><body><div class=content><div class="page-wrapper toggled"><nav id=sidebar class=sidebar-wrapper><div class=sidebar-brand><a href=/ aria-label=HomePage alt=HomePage style=text-transform:unset><svg width="26" height="26" viewBox="0 0 1041 1348" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M340.837.33933 681.068.338989V.455643C684.032.378397 686.999.339702 689.967.339702 735.961.3397 781.504 9.62899 823.997 27.6772 866.49 45.7254 905.099 72.1791 937.622 105.528 970.144 138.877 995.942 178.467 1013.54 222.04 1031.14 265.612 1040.2 312.312 1040.2 359.474H340.836V1347.84C296.157 1347.84 251.914 1338.55 210.636 1320.49 169.357 1302.43 131.85 1275.95 100.257 1242.58 68.6636 1209.21 43.6023 1169.59 26.5041 1125.99 11.3834 1087.43 2.75216 1046.42.957956 1004.81H.605869L.605897 368.098H.70363c-.597878-26.267 1.53378-52.655 6.43943-78.687C20.2709 219.745 52.6748 155.754 100.257 105.528 147.839 55.3017 208.462 21.0975 274.461 7.24017 296.426 2.62833 318.657.339101 340.837.33933z" fill="url(#paint0_linear_1172_228)"/><path d="M633.639 904.645H513.029V576.37H635.422V576.377C678.161 576.607 720.454 585.093 759.951 601.37 799.997 617.874 836.384 642.064 867.033 672.559c30.65 30.495 54.963 66.698 71.55 106.542C955.171 818.944 963.709 861.648 963.709 904.775H633.639V904.645z" fill="url(#paint1_linear_1172_228)"/><defs><linearGradient id="paint0_linear_1172_228" x1="520.404" y1=".338989" x2="520.404" y2="1347.84" gradientUnits="userSpaceOnUse"><stop stop-color="#326dff"/><stop offset="1" stop-color="#8eaeff"/></linearGradient><linearGradient id="paint1_linear_1172_228" x1="738.369" y1="576.37" x2="738.369" y2="904.775" gradientUnits="userSpaceOnUse"><stop stop-color="#326dff"/><stop offset="1" stop-color="#8eaeff"/></linearGradient></defs></svg>&nbsp;
FastGPT</a></div><div class=sidebar-content style="height:calc(100% - 131px)"><ul class=sidebar-menu><li><a class=sidebar-root-link href=/docs/intro/><i class="material-icons me-2">rocket_launch</i>
快速了解 FastGPT</a></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">import_contacts</i>
基础教程</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/course/quick-start/>快速上手</a></li><li><a class=sidebar-nested-link href=/docs/course/websync/>Web 站点同步</a></li><li><a class=sidebar-nested-link href=/docs/course/data_search/>知识库搜索参数</a></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">family_history</i>
高级编排</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/workflow/intro/>高级编排介绍</a></li><li class="sidebar-dropdown nested"><button class=btn>
模块介绍</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/workflow/modules/ai_chat/>AI 对话</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/content_extract/>内容提取</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/guide/>用户引导</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/custom_feedback/>自定义反馈</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/http/>新 HTTP 模块</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/input/>用户问题</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/dataset_search/>知识库搜索</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/question_classify/>问题分类</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/reply/>指定回复</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/trigger/>触发器</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/variable/>全局变量</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/tfswitch/>判断器</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/text_editor/>文本加工</a></li><li><a class=sidebar-nested-link href=/docs/workflow/modules/coreferenceresolution/>问题补全</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
编排示例</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/workflow/examples/fixingevidence/>固定开头和结尾内容</a></li><li><a class=sidebar-nested-link href=/docs/workflow/examples/google_search/>接入谷歌搜索</a></li><li><a class=sidebar-nested-link href=/docs/workflow/examples/lab_appointment/>实验室预约</a></li><li><a class=sidebar-nested-link href=/docs/workflow/examples/versatile_assistant/>全能助手</a></li></ul></div></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">cases</i>
使用案例</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/use-cases/ai_settings/>AI 高级配置说明</a></li><li><a class=sidebar-nested-link href=/docs/use-cases/datasetengine/>知识库结构讲解</a></li><li><a class=sidebar-nested-link href=/docs/use-cases/feishu/>接入飞书</a></li><li><a class=sidebar-nested-link href=/docs/use-cases/onwechat/>对接 chatgpt-on-wechat</a></li><li><a class=sidebar-nested-link href=/docs/use-cases/openapi/>对接第三方 GPT 应用</a></li><li><a class=sidebar-nested-link href=/docs/use-cases/wechat/>接入微信和企业微信</a></li><li><a class=sidebar-nested-link href=/docs/use-cases/kb/>打造高质量 AI 知识库(过期)</a></li></ul></div></li><li class="sidebar-dropdown current active"><button class=btn>
<i class="material-icons me-2">code_blocks</i>
开发与部署指南</button><div class="sidebar-submenu d-block"><ul><li><a class=sidebar-nested-link href=/docs/development/intro/>快速开始本地开发</a></li><li><a class=sidebar-nested-link href=/docs/development/sealos/>Sealos 一键部署</a></li><li><a class=sidebar-nested-link href=/docs/development/docker/>Docker Compose 快速部署</a></li><li><a class=sidebar-nested-link href=/docs/development/one-api/>接入微软、ChatGLM、本地模型等</a></li><li><a class=sidebar-nested-link href=/docs/development/configuration/>配置文件介绍</a></li><li><a class=sidebar-nested-link href=/docs/development/qa/>常见开发 & 部署问题</a></li><li class="sidebar-dropdown nested"><button class=btn>
版本更新/升级操作</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/development/upgrading/intro/>升级说明</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/466/>V4.6.6（需要改配置文件）</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/465/>V4.6.5（需要改配置文件）</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/464/>V4.6.4(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/463/>V4.6.3(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/462/>V4.6.2(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/461/>V4.6.1</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/46/>V4.6(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/452/>V4.5.2</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/451/>V4.5.1(需进行初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/45/>V4.5(需进行较为复杂更新)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/447/>V4.4.7（需执行升级脚本）</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/446/>V4.4.6</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/445/>V4.4.5(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/442/>升级到 V4.4.2(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/441/>升级到 V4.4.1(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/44/>升级到 V4.4(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/43/>升级到 V4.3(需要初始化)</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/421/>升级到 V4.2.1</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/42/>升级到 V4.2</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/41/>升级到 V4.1</a></li><li><a class=sidebar-nested-link href=/docs/development/upgrading/40/>升级到 V4.0</a></li></ul></div></li><li class="sidebar-dropdown nested current active"><button class=btn>
OpenAPI 接口文档</button><div class="sidebar-submenu d-block"><ul><li><a class=sidebar-nested-link href=/docs/development/openapi/auth/>Api Key 使用与鉴权</a></li><li><a class=sidebar-nested-link href=/docs/development/openapi/chat/>对话接口</a></li><li><a class=sidebar-nested-link href=/docs/development/openapi/dataset/>知识库接口</a></li><li class=current><a class=sidebar-nested-link href=/docs/development/openapi/share/>分享链接身份鉴权</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
本地模型使用</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/development/custom-models/chatglm2/>接入 ChatGLM2-6B</a></li><li><a class=sidebar-nested-link href=/docs/development/custom-models/reranker/>接入 ReRank 重排模型</a></li><li><a class=sidebar-nested-link href=/docs/development/custom-models/m3e/>接入 M3E 向量模型</a></li><li><a class=sidebar-nested-link href=/docs/development/custom-models/chatglm2-m3e/>接入 ChatGLM2-m3e 模型</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
代理方案</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/development/proxy/nginx/>Nginx 中转</a></li><li><a class=sidebar-nested-link href=/docs/development/proxy/http_proxy/>HTTP 代理中转</a></li><li><a class=sidebar-nested-link href=/docs/development/proxy/cloudflare/>Cloudflare Worker 中转</a></li></ul></div></li><li class="sidebar-dropdown nested"><button class=btn>
设计方案</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/development/design/dataset/>数据集</a></li></ul></div></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">shopping_cart</i>
商业版介绍</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/commercial/intro/>商业版</a></li></ul></div></li><li><a class=sidebar-root-link href=/docs/pricing/><i class="material-icons me-2">currency_yen</i>
线上版定价</a></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">handshake</i>
协议</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=/docs/agreement/open-source/>开源协议</a></li><li><a class=sidebar-nested-link href=/docs/agreement/disclaimer/>免责声明</a></li></ul></div></li><li><a class=sidebar-root-link href=/docs/community/><i class="material-icons me-2">forum</i>
加入社区</a></li></ul></div><ul class="sidebar-footer list-unstyled mb-0"></ul></nav><main class="page-content bg-transparent"><div id=top-header class="top-header d-print-none"><div class="header-bar d-flex justify-content-between"><div class="d-flex align-items-center"><a href=/ class="logo-icon me-3" aria-label=HomePage alt=HomePage><div class=small><svg width="26" height="26" viewBox="0 0 1041 1348" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M340.837.33933 681.068.338989V.455643C684.032.378397 686.999.339702 689.967.339702 735.961.3397 781.504 9.62899 823.997 27.6772 866.49 45.7254 905.099 72.1791 937.622 105.528 970.144 138.877 995.942 178.467 1013.54 222.04 1031.14 265.612 1040.2 312.312 1040.2 359.474H340.836V1347.84C296.157 1347.84 251.914 1338.55 210.636 1320.49 169.357 1302.43 131.85 1275.95 100.257 1242.58 68.6636 1209.21 43.6023 1169.59 26.5041 1125.99 11.3834 1087.43 2.75216 1046.42.957956 1004.81H.605869L.605897 368.098H.70363c-.597878-26.267 1.53378-52.655 6.43943-78.687C20.2709 219.745 52.6748 155.754 100.257 105.528 147.839 55.3017 208.462 21.0975 274.461 7.24017 296.426 2.62833 318.657.339101 340.837.33933z" fill="url(#paint0_linear_1172_228)"/><path d="M633.639 904.645H513.029V576.37H635.422V576.377C678.161 576.607 720.454 585.093 759.951 601.37 799.997 617.874 836.384 642.064 867.033 672.559c30.65 30.495 54.963 66.698 71.55 106.542C955.171 818.944 963.709 861.648 963.709 904.775H633.639V904.645z" fill="url(#paint1_linear_1172_228)"/><defs><linearGradient id="paint0_linear_1172_228" x1="520.404" y1=".338989" x2="520.404" y2="1347.84" gradientUnits="userSpaceOnUse"><stop stop-color="#326dff"/><stop offset="1" stop-color="#8eaeff"/></linearGradient><linearGradient id="paint1_linear_1172_228" x1="738.369" y1="576.37" x2="738.369" y2="904.775" gradientUnits="userSpaceOnUse"><stop stop-color="#326dff"/><stop offset="1" stop-color="#8eaeff"/></linearGradient></defs></svg></div><div class=big><svg width="26" height="26" viewBox="0 0 1041 1348" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M340.837.33933 681.068.338989V.455643C684.032.378397 686.999.339702 689.967.339702 735.961.3397 781.504 9.62899 823.997 27.6772 866.49 45.7254 905.099 72.1791 937.622 105.528 970.144 138.877 995.942 178.467 1013.54 222.04 1031.14 265.612 1040.2 312.312 1040.2 359.474H340.836V1347.84C296.157 1347.84 251.914 1338.55 210.636 1320.49 169.357 1302.43 131.85 1275.95 100.257 1242.58 68.6636 1209.21 43.6023 1169.59 26.5041 1125.99 11.3834 1087.43 2.75216 1046.42.957956 1004.81H.605869L.605897 368.098H.70363c-.597878-26.267 1.53378-52.655 6.43943-78.687C20.2709 219.745 52.6748 155.754 100.257 105.528 147.839 55.3017 208.462 21.0975 274.461 7.24017 296.426 2.62833 318.657.339101 340.837.33933z" fill="url(#paint0_linear_1172_228)"/><path d="M633.639 904.645H513.029V576.37H635.422V576.377C678.161 576.607 720.454 585.093 759.951 601.37 799.997 617.874 836.384 642.064 867.033 672.559c30.65 30.495 54.963 66.698 71.55 106.542C955.171 818.944 963.709 861.648 963.709 904.775H633.639V904.645z" fill="url(#paint1_linear_1172_228)"/><defs><linearGradient id="paint0_linear_1172_228" x1="520.404" y1=".338989" x2="520.404" y2="1347.84" gradientUnits="userSpaceOnUse"><stop stop-color="#326dff"/><stop offset="1" stop-color="#8eaeff"/></linearGradient><linearGradient id="paint1_linear_1172_228" x1="738.369" y1="576.37" x2="738.369" y2="904.775" gradientUnits="userSpaceOnUse"><stop stop-color="#326dff"/><stop offset="1" stop-color="#8eaeff"/></linearGradient></defs></svg></div></a><button id=close-sidebar class="btn btn-icon btn-soft">
<span class="material-icons size-20 menu-icon align-middle">menu</span></button>
<span><div id=docsearch></div></span></div><div class="d-flex align-items-center"><ul class="list-unstyled mb-0"><li class="list-inline-item mb-0"><a href=https://github.com/labring/FastGPT alt=github rel="noopener noreferrer" target=_blank><div class="btn btn-icon btn-default border-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>GitHub</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></div></a></li><li class="list-inline-item mb-0"><a href=https://oss.laf.run/htr4n1-images/fastgpt-qr-code.jpg alt=wechat rel="noopener noreferrer" target=_blank><div class="btn btn-icon btn-default border-0"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>微信群</title><path d="M21.6696 15.9962C21.9464 15.9925 22.2107 15.881 22.4064 15.6853 22.6021 15.4896 22.7137 15.2252 22.7173 14.9485c0-.581-.465500000000002-1.0477-1.0477-1.0477C21.0875 13.9008 20.622 14.3675 20.622 14.9485c0 .583300000000001.4666 1.0477 1.0476 1.0477zm-5.1625.0C16.7839 15.9925 17.0482 15.881 17.2439 15.6853S17.5512 15.2252 17.5548 14.9485c0-.581-.466699999999999-1.0477-1.0477-1.0477C15.9238 13.9008 15.4595 14.3675 15.4595 14.9485c0 .583300000000001.4655 1.0477 1.0476 1.0477zm7.6615 5.88C24.0939 21.9177 24.0342 21.9818 23.9981 22.0594 23.9621 22.1369 23.9515 22.2239 23.968 22.3078 23.968 22.3638 23.968 22.421 23.9971 22.4793c.1144.486500000000003.343 1.2612.343 1.2904C24.3401 23.8548 24.3693 23.912 24.3693 23.9703 24.3693 24.0041 24.3626 24.0376 24.3496 24.0688 24.3367 24.1 24.3177 24.1284 24.2937 24.1522 24.2697 24.1761 24.2413 24.195 24.21 24.2078 24.1788 24.2206 24.1453 24.2272 24.1115 24.227 24.0531 24.227 24.0251 24.199 23.968 24.171L22.2775 23.1957C22.154 23.1277 22.0168 23.0886 21.8761 23.0813 21.791 23.0813 21.7046 23.0813 21.6475 23.1093 20.8448 23.3392 20.0141 23.4535 19.1263 23.4535c-4.27.0-7.7082-2.8665-7.7082-6.4225.0-3.5548 3.4382-6.4225 7.7082-6.4225 4.2688.0 7.707 2.8677 7.707 6.4225.0 1.9215-1.0313 3.6703-2.6647 4.8463V21.8762zM19.4518 9.44883C19.3429 9.44521 19.234 9.44327 19.1251 9.443c-4.8696.0-8.8736 3.3367-8.8736 7.5892.0.6463.0932999999999993 1.2716.266 1.8666H10.4136C9.39426 18.8885 8.38067 18.7442 7.39896 18.4695 7.31263 18.4403 7.22629 18.4403 7.13996 18.4403 6.96754 18.444 6.79921 18.4935 6.65229 18.5838L4.61296 19.7563C4.55463 19.7855 4.49746 19.8147 4.44029 19.8147 4.35703 19.8138 4.27744 19.7803 4.21856 19.7214 4.15968 19.6625 4.1262 19.5829 4.12529 19.4997 4.12529 19.4133 4.15329 19.3562 4.18246 19.2698 4.21046 19.2418 4.46946 18.2968 4.61296 17.7252 4.61296 17.6668 4.64096 17.5817 4.64096 17.5245 4.64065 17.4245 4.61721 17.3259 4.57248 17.2364 4.52775 17.147 4.46295 17.0691 4.38313 17.0088c-1.98217-1.4035-3.2165-3.4918-3.2165-5.8111.0-4.26187 4.165-7.6977 9.27497-7.6977 4.3925.0 8.085 2.5305 9.0102 5.94767V9.44883zM13.4388 9.9365c.6685.0 1.197-.5565 1.197-1.197.0-.6685-.528499999999999-1.197-1.197-1.197S12.2418 8.071 12.2418 8.7395 12.7703 9.9365 13.4388 9.9365zm-6.13667.0c.6685.0 1.19816-.5565 1.19816-1.197.0-.6685-.52966-1.197-1.19816-1.197-.66734.0-1.197.528499999999999-1.197 1.197s.52966 1.197 1.197 1.197z"/></svg></div></a></li></ul><button id=mode class="btn btn-icon btn-default ms-2" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 48 48" fill="currentcolor"><path d="M24 42q-7.5.0-12.75-5.25T6 24t5.25-12.75T24 6q.4.0.85.025.45.025 1.15.075-1.8 1.6-2.8 3.95t-1 4.95q0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6.0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42zm0-3q5.45.0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75.0-9.775-4.025T19.2 15q0-1.2.25-2.575t.9-3.125q-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39zm-.2-14.85z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 48 48" fill="currentcolor"><path d="M24 31q2.9.0 4.95-2.05T31 24t-2.05-4.95T24 17t-4.95 2.05T17 24t2.05 4.95T24 31zm0 3q-4.15.0-7.075-2.925T14 24t2.925-7.075T24 14t7.075 2.925T34 24t-2.925 7.075T24 34zM3.5 25.5q-.65.0-1.075-.425Q2 24.65 2 24t.425-1.075Q2.85 22.5 3.5 22.5h5q.65.0 1.075.425Q10 23.35 10 24t-.425 1.075T8.5 25.5zm36 0q-.65.0-1.075-.425Q38 24.65 38 24t.425-1.075T39.5 22.5h5q.65.0 1.075.425Q46 23.35 46 24t-.425 1.075-1.075.425zM24 10q-.65.0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2t1.075.425T25.5 3.5v5q0 .65-.425 1.075Q24.65 10 24 10zm0 36q-.65.0-1.075-.425T22.5 44.5v-5q0-.65.425-1.075Q23.35 38 24 38t1.075.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46zM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05.0.6-.4 1-.4.45-1.025.45T12 14.1zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45zM33.9 14.1q-.45-.45-.45-1.05.0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4t-1.075-.4zM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6.0 1.05.45.45.45.45 1.05.0.6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425zM24 24z"/></svg></span></button></div></div></div><div class=container-fluid><div class=layout-spacing><div class="d-md-flex justify-content-between align-items-center"><nav aria-label=breadcrumb class="d-inline-block pb-2 mt-1 mt-sm-0"><ul id=breadcrumbs class="breadcrumb bg-transparent mb-0" itemscope itemtype=https://schema.org/BreadcrumbList><li class="breadcrumb-item text-capitalize active" aria-current=page itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/docs/><i class="material-icons size-20 align-text-bottom" itemprop=name>Home</i></a><meta itemprop=position content="1"></li><li class="breadcrumb-item text-capitalize" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/docs/development/><span itemprop=name>开发与部署指南</span></a><meta itemprop=position content="2"></li><li class="breadcrumb-item text-capitalize" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/docs/development/openapi/><span itemprop=name>OpenAPI 接口文档</span></a><meta itemprop=position content="3"></li><li class="breadcrumb-item text-capitalize active" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><span itemprop=name>分享链接身份鉴权</span><meta itemprop=position content="4"></li></ul></nav></div><div class="row flex-xl-nowrap"><div class="docs-toc col-xl-3 d-xl-block"><toc><div class="fw-bold text-uppercase mb-2">分享链接身份鉴权</div><nav id=toc><ul><li><ul><li><a href=#介绍>介绍</a></li><li><a href=#使用说明>使用说明</a><ul><li><a href=#接口统一响应格式>接口统一响应格式</a></li><li><a href=#触发流程>触发流程</a></li></ul></li><li><a href=#配置教程>配置教程</a><ul><li><a href=#1-配置身份校验地址>1. 配置身份校验地址</a></li><li><a href=#2-分享链接中增加额外-query>2. 分享链接中增加额外 query</a></li><li><a href=#3-编写聊天初始化校验接口>3. 编写聊天初始化校验接口</a></li><li><a href=#4-编写对话前校验接口>4. 编写对话前校验接口</a></li><li><a href=#5-编写对话结果上报接口可选>5. 编写对话结果上报接口（可选）</a></li></ul></li><li><a href=#实践案例>实践案例</a><ul><li><a href=#1-创建3个laf接口>1. 创建3个Laf接口</a></li><li><a href=#2-配置校验地址>2. 配置校验地址</a></li><li><a href=#3-修改分享链接参数>3. 修改分享链接参数</a></li><li><a href=#4-测试效果>4. 测试效果</a></li></ul></li><li><a href=#使用场景>使用场景</a></li></ul></li></ul></nav></toc></div><div class="docs-toc-mobile d-print-none d-xl-none"><button id=toc-dropdown-btn class="btn-secondary dropdown-toggle" type=button data-bs-toggle=dropdown data-bs-offset=0,0 aria-expanded=false>
Table of Contents</button><nav id=toc-mobile><ul class=dropdown-menu><li><ul><li><a href=#介绍>介绍</a></li><li><a href=#使用说明>使用说明</a><ul><li><a href=#接口统一响应格式>接口统一响应格式</a></li><li><a href=#触发流程>触发流程</a></li></ul></li><li><a href=#配置教程>配置教程</a><ul><li><a href=#1-配置身份校验地址>1. 配置身份校验地址</a></li><li><a href=#2-分享链接中增加额外-query>2. 分享链接中增加额外 query</a></li><li><a href=#3-编写聊天初始化校验接口>3. 编写聊天初始化校验接口</a></li><li><a href=#4-编写对话前校验接口>4. 编写对话前校验接口</a></li><li><a href=#5-编写对话结果上报接口可选>5. 编写对话结果上报接口（可选）</a></li></ul></li><li><a href=#实践案例>实践案例</a><ul><li><a href=#1-创建3个laf接口>1. 创建3个Laf接口</a></li><li><a href=#2-配置校验地址>2. 配置校验地址</a></li><li><a href=#3-修改分享链接参数>3. 修改分享链接参数</a></li><li><a href=#4-测试效果>4. 测试效果</a></li></ul></li><li><a href=#使用场景>使用场景</a></li></ul></li></ul></nav></div><div class="docs-content col-12 col-xl-9 mt-0"><div class="mb-0 d-flex"><i class="material-icons title-icon me-2">share</i><h1 class="content-title mb-0">分享链接身份鉴权</h1></div><p class="lead mb-3">FastGPT 分享链接身份鉴权</p><div id=content class=main-content data-bs-spy=scroll data-bs-root-margin="0px 0px -65%" data-bs-target=#toc-mobile><div data-prismjs-copy data-prismjs-copy-success data-prismjs-copy-error><h2 id=介绍>介绍 <a href=#%e4%bb%8b%e7%bb%8d class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>在 FastGPT V4.6.4 中，我们修改了分享链接的数据读取方式，为每个用户生成一个 localId，用于标识用户，从云端拉取对话记录。但是这种方式仅能保障用户在同一设备同一浏览器中使用，如果切换设备或者清空浏览器缓存则会丢失这些记录。这种方式存在一定的风险，因此我们仅允许用户拉取近<code>30天</code>的<code>20条</code>记录。</p><p>分享链接身份鉴权设计的目的在于，将 FastGPT 的对话框快速、安全的接入到你现有的系统中，仅需 2 个接口即可实现。</p><h2 id=使用说明>使用说明 <a href=#%e4%bd%bf%e7%94%a8%e8%af%b4%e6%98%8e class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>免登录链接配置中，你可以选择填写<code>身份验证</code>栏。这是一个<code>POST</code>请求的根地址。在填写该地址后，分享链接的初始化、开始对话以及对话结束都会向该地址的特定接口发送一条请求。下面以<code>host</code>来表示<code>凭身份验证根地址</code>。服务器接口仅需返回是否校验成功即可，不需要返回其他数据，格式如下：</p><h3 id=接口统一响应格式>接口统一响应格式 <a href=#%e6%8e%a5%e5%8f%a3%e7%bb%9f%e4%b8%80%e5%93%8d%e5%ba%94%e6%a0%bc%e5%bc%8f class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><div class=prism-codeblock><pre id=3377a00 class=language-json>
  <code>{
    &#34;success&#34;: true,
    &#34;message&#34;: &#34;错误提示&#34;,
    &#34;msg&#34;: &#34;同message, 错误提示&#34;,
    &#34;data&#34;: {
        &#34;uid&#34;: &#34;用户唯一凭证&#34;
    }
}</code>
  </pre></div><p><code>FastGPT</code> 将会判断<code>success</code>是否为<code>true</code>决定是允许用户继续操作。<code>message</code>与<code>msg</code>是等同的，你可以选择返回其中一个，当<code>success</code>不为<code>true</code>时，将会提示这个错误。</p><p><code>uid</code>是用户的唯一凭证，将会用于拉取对话记录以及保存对话记录。可参考下方实践案例。</p><h3 id=触发流程>触发流程 <a href=#%e8%a7%a6%e5%8f%91%e6%b5%81%e7%a8%8b class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><img src=https://cdn.jsdelivr.us/gh/yangchuansheng/fastgpt-imgs@main/imgs/sharelinkProcess.png alt loading=lazy></p><h2 id=配置教程>配置教程 <a href=#%e9%85%8d%e7%bd%ae%e6%95%99%e7%a8%8b class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><h3 id=1-配置身份校验地址>1. 配置身份校验地址 <a href=#1-%e9%85%8d%e7%bd%ae%e8%ba%ab%e4%bb%bd%e6%a0%a1%e9%aa%8c%e5%9c%b0%e5%9d%80 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><img src=https://cdn.jsdelivr.us/gh/yangchuansheng/fastgpt-imgs@main/imgs/share-setlink.jpg alt loading=lazy></p><p>配置校验地址后，在每次分享链接使用时，都会向对应的地址发起校验和上报请求。</p><div class="alert alert-default d-flex" role=alert><div class="flex-shrink-1 alert-icon"><p>🤖</p></div><div class=w-100><p>这里仅需配置根地址，无需具体到完整请求路径。</p></div></div><h3 id=2-分享链接中增加额外-query>2. 分享链接中增加额外 query <a href=#2-%e5%88%86%e4%ba%ab%e9%93%be%e6%8e%a5%e4%b8%ad%e5%a2%9e%e5%8a%a0%e9%a2%9d%e5%a4%96-query class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p>在分享链接的地址中，增加一个额外的参数: authToken。例如：</p><p>原始的链接：<code>https://share.fastgpt.in/chat/share?shareId=648aaf5ae121349a16d62192</code></p><p>完整链接: <code>https://share.fastgpt.in/chat/share?shareId=648aaf5ae121349a16d62192&amp;authToken=userid12345</code></p><p>这个<code>authToken</code>通常是你系统生成的用户唯一凭证（Token之类的）。FastGPT 会在鉴权接口的<code>body</code>中携带 token={{authToken}} 的参数。</p><h3 id=3-编写聊天初始化校验接口>3. 编写聊天初始化校验接口 <a href=#3-%e7%bc%96%e5%86%99%e8%81%8a%e5%a4%a9%e5%88%9d%e5%a7%8b%e5%8c%96%e6%a0%a1%e9%aa%8c%e6%8e%a5%e5%8f%a3 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><nav><div class="nav nav-tabs" id=nav-tab role=tablist><a class="nav-link active" id=efdcabTab data-bs-toggle=tab data-bs-target=#efdcab type=button role=tab aria-controls=efdcab aria-selected=true>请求示例</a>
<a class=nav-link id=cbaedfTab data-bs-toggle=tab data-bs-target=#cbaedf type=button role=tab aria-controls=cbaedf aria-selected=true>鉴权成功</a>
<a class=nav-link id=dfebcaTab data-bs-toggle=tab data-bs-target=#dfebca type=button role=tab aria-controls=dfebca aria-selected=true>鉴权失败</a></div></nav><div class=tab-content id=nav-tab-content><div class="tab-pane fade show active" id=efdcab role=tabpanel aria-labelledby=nav-1><div class=prism-codeblock><pre id=39d214b class=language-bash>
  <code>curl --location --request POST &#39;{{host}}/shareAuth/init&#39; \
--header &#39;Content-Type: application/json&#39; \
--data-raw &#39;{
    &#34;token&#34;: &#34;{{authToken}}&#34;
}&#39;</code>
  </pre></div></div><div class="tab-pane fade" id=cbaedf role=tabpanel aria-labelledby=nav-1><div class=prism-codeblock><pre id=d6c7899 class=language-json>
  <code>{
    &#34;success&#34;: true,
    &#34;data&#34;: {
        &#34;uid&#34;: &#34;用户唯一凭证&#34;
    }
}</code>
  </pre></div><p>系统会拉取该分享链接下，uid 为 username123 的对话记录。</p></div><div class="tab-pane fade" id=dfebca role=tabpanel aria-labelledby=nav-1><div class=prism-codeblock><pre id=3297f92 class=language-json>
  <code>{
    &#34;success&#34;: false,
    &#34;message&#34;: &#34;身份错误&#34;,
}</code>
  </pre></div></div></div><h3 id=4-编写对话前校验接口>4. 编写对话前校验接口 <a href=#4-%e7%bc%96%e5%86%99%e5%af%b9%e8%af%9d%e5%89%8d%e6%a0%a1%e9%aa%8c%e6%8e%a5%e5%8f%a3 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><nav><div class="nav nav-tabs" id=nav-tab role=tablist><a class="nav-link active" id=fcdebaTab data-bs-toggle=tab data-bs-target=#fcdeba type=button role=tab aria-controls=fcdeba aria-selected=true>请求示例</a>
<a class=nav-link id=fabcdeTab data-bs-toggle=tab data-bs-target=#fabcde type=button role=tab aria-controls=fabcde aria-selected=true>鉴权成功</a>
<a class=nav-link id=eafbcdTab data-bs-toggle=tab data-bs-target=#eafbcd type=button role=tab aria-controls=eafbcd aria-selected=true>鉴权失败</a></div></nav><div class=tab-content id=nav-tab-content><div class="tab-pane fade show active" id=fcdeba role=tabpanel aria-labelledby=nav-1><div class=prism-codeblock><pre id=40c1d59 class=language-bash>
  <code>curl --location --request POST &#39;{{host}}/shareAuth/start&#39; \
--header &#39;Content-Type: application/json&#39; \
--data-raw &#39;{
    &#34;token&#34;: &#34;{{authToken}}&#34;,
    &#34;question&#34;: &#34;用户问题&#34;,
}&#39;</code>
  </pre></div></div><div class="tab-pane fade" id=fabcde role=tabpanel aria-labelledby=nav-1><div class=prism-codeblock><pre id=d6c7899 class=language-json>
  <code>{
    &#34;success&#34;: true,
    &#34;data&#34;: {
        &#34;uid&#34;: &#34;用户唯一凭证&#34;
    }
}</code>
  </pre></div></div><div class="tab-pane fade" id=eafbcd role=tabpanel aria-labelledby=nav-1><div class=prism-codeblock><pre id=23a56e7 class=language-json>
  <code>{
    &#34;success&#34;: false,
    &#34;message&#34;: &#34;身份验证失败&#34;,
}</code>
  </pre></div><div class=prism-codeblock><pre id=c11f795 class=language-json>
  <code>{
    &#34;success&#34;: false,
    &#34;message&#34;: &#34;存在违规词&#34;,
}</code>
  </pre></div></div></div><h3 id=5-编写对话结果上报接口可选>5. 编写对话结果上报接口（可选） <a href=#5-%e7%bc%96%e5%86%99%e5%af%b9%e8%af%9d%e7%bb%93%e6%9e%9c%e4%b8%8a%e6%8a%a5%e6%8e%a5%e5%8f%a3%e5%8f%af%e9%80%89 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p>该接口无规定返回值。</p><p>响应值与<a data-bs-delay='{"hide":300,"show":550}' data-bs-html=true data-bs-title="<a href='/docs/development/openapi/chat/'><p>OPENAPI 接口文档</p><strong>对话接口</strong><br>FastGPT OpenAPI 对话接口</a>" data-bs-toggle=tooltip href=/docs/development/openapi/chat/#响应>chat 接口格式相同</a>，仅多了一个<code>token</code>。</p><p>可以重点关注<code>responseData</code>里的<code>price</code>值，<code>price</code>与实际价格的倍率为<code>100000</code>，即 100000=1元。</p><div class=prism-codeblock><pre id=47feae1 class=language-bash>
  <code>curl --location --request POST &#39;{{host}}/shareAuth/finish&#39; \
--header &#39;Content-Type: application/json&#39; \
--data-raw &#39;{
    &#34;token&#34;: &#34;{{authToken}}&#34;,
    &#34;responseData&#34;: [
        {
            &#34;moduleName&#34;: &#34;KB Search&#34;,
            &#34;price&#34;: 1.2000000000000002,
            &#34;model&#34;: &#34;Embedding-2&#34;,
            &#34;tokens&#34;: 6,
            &#34;similarity&#34;: 0.61,
            &#34;limit&#34;: 3
        },
        {
            &#34;moduleName&#34;: &#34;AI Chat&#34;,
            &#34;price&#34;: 454.5,
            &#34;model&#34;: &#34;FastAI-4k&#34;,
            &#34;tokens&#34;: 303,
            &#34;question&#34;: &#34;导演是谁&#34;,
            &#34;answer&#34;: &#34;电影《铃芽之旅》的导演是新海诚。&#34;,
            &#34;maxToken&#34;: 2050,
            &#34;quoteList&#34;: [
                {
                    &#34;dataset_id&#34;: &#34;646627f4f7b896cfd8910e38&#34;,
                    &#34;id&#34;: &#34;8099&#34;,
                    &#34;q&#34;: &#34;本作的主人公是谁？&#34;,
                    &#34;a&#34;: &#34;本作的主人公是名叫铃芽的少女。&#34;,
                    &#34;source&#34;: &#34;手动修改&#34;
                },
                {
                    &#34;dataset_id&#34;: &#34;646627f4f7b896cfd8910e38&#34;,
                    &#34;id&#34;: &#34;8686&#34;,
                    &#34;q&#34;: &#34;电影《铃芽之旅》男主角是谁？&#34;,
                    &#34;a&#34;: &#34;电影《铃芽之旅》男主角是宗像草太，由松村北斗配音。&#34;,
                    &#34;source&#34;: &#34;&#34;
                },
                {
                    &#34;dataset_id&#34;: &#34;646627f4f7b896cfd8910e38&#34;,
                    &#34;id&#34;: &#34;19339&#34;,
                    &#34;q&#34;: &#34;电影《铃芽之旅》的导演是谁？22&#34;,
                    &#34;a&#34;: &#34;电影《铃芽之旅》的导演是新海诚。&#34;,
                    &#34;source&#34;: &#34;手动修改&#34;
                }
            ],
            &#34;completeMessages&#34;: [
                {
                    &#34;obj&#34;: &#34;System&#34;,
                    &#34;value&#34;: &#34;下面是知识库内容:\n1. [本作的主人公是谁？\n本作的主人公是名叫铃芽的少女。]\n2. [电影《铃芽之旅》男主角是谁？\n电影《铃芽之旅》男主角是宗像草太，由松村北斗配音。]\n3. [电影《铃芽之旅》的导演是谁？22\n电影《铃芽之旅》的导演是新海诚。]\n&#34;
                },
                {
                    &#34;obj&#34;: &#34;System&#34;,
                    &#34;value&#34;: &#34;1.请记住，你的身份是百度的下一代知识增强语言模型，能够完全根据知识库提供的内容回答问题。\n\n2. 你忘记了关于电影《铃芽之旅》以外的内容。&#34;
                },
                {
                    &#34;obj&#34;: &#34;System&#34;,
                    &#34;value&#34;: &#34;你仅回答关于电影《玲芽之旅》的问题，其余问题直接回复: 我不清楚。&#34;
                },
                {
                    &#34;obj&#34;: &#34;Human&#34;,
                    &#34;value&#34;: &#34;导演是谁&#34;
                },
                {
                    &#34;obj&#34;: &#34;AI&#34;,
                    &#34;value&#34;: &#34;电影《铃芽之旅》的导演是新海诚。&#34;
                }
            ]
        }
    ]
}&#39;</code>
  </pre></div><h2 id=实践案例>实践案例 <a href=#%e5%ae%9e%e8%b7%b5%e6%a1%88%e4%be%8b class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>我们以<a href=https://laf.dev/ rel=external target=_blank>Laf作为服务器为例<svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a>，简单展示这 3 个接口的使用方式。</p><h3 id=1-创建3个laf接口>1. 创建3个Laf接口 <a href=#1-%e5%88%9b%e5%bb%ba3%e4%b8%aalaf%e6%8e%a5%e5%8f%a3 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><img src=https://cdn.jsdelivr.us/gh/yangchuansheng/fastgpt-imgs@main/imgs/share-auth1.jpg alt loading=lazy></p><nav><div class="nav nav-tabs" id=nav-tab role=tablist><a class="nav-link active" id=adecfbTab data-bs-toggle=tab data-bs-target=#adecfb type=button role=tab aria-controls=adecfb aria-selected=true>/shareAuth/init</a>
<a class=nav-link id=faecdbTab data-bs-toggle=tab data-bs-target=#faecdb type=button role=tab aria-controls=faecdb aria-selected=true>/shareAuth/start</a>
<a class=nav-link id=bdfceaTab data-bs-toggle=tab data-bs-target=#bdfcea type=button role=tab aria-controls=bdfcea aria-selected=true>/shareAuth/finish</a></div></nav><div class=tab-content id=nav-tab-content><div class="tab-pane fade show active" id=adecfb role=tabpanel aria-labelledby=nav-1><p>这个接口中，我们设置了<code>token</code>必须等于<code>fastgpt</code>才能通过校验。（实际生产中不建议固定写死）</p><div class=prism-codeblock><pre id=ba0b6c9 class=language-ts>
  <code>import cloud from &#39;@lafjs/cloud&#39;

export default async function (ctx: FunctionContext) {
  const { token } = ctx.body
 
  // 此处省略 token 解码过程 
  if (token === &#39;fastgpt&#39;) {
    return { success: true,  data: { uid: &#34;user1&#34; } }
  }

  return { success: false,message:&#34;身份错误&#34; }
}</code>
  </pre></div></div><div class="tab-pane fade" id=faecdb role=tabpanel aria-labelledby=nav-1><p>这个接口中，我们设置了<code>token</code>必须等于<code>fastgpt</code>才能通过校验。并且如果问题中包含了<code>你</code>字，则会报错，用于模拟敏感校验。</p><div class=prism-codeblock><pre id=cf82db5 class=language-ts>
  <code>import cloud from &#39;@lafjs/cloud&#39;

export default async function (ctx: FunctionContext) {
  const { token, question } = ctx.body

  // 此处省略 token 解码过程 
  if (token !== &#39;fastgpt&#39;) {
    return { success: false, message: &#34;身份错误&#34; }
 
  }

  if(question.includes(&#34;你&#34;)){
    return { success: false, message: &#34;内容不合规&#34; }
  }

  return { success: true, data: { uid: &#34;user1&#34; } } 
}</code>
  </pre></div></div><div class="tab-pane fade" id=bdfcea role=tabpanel aria-labelledby=nav-1><p>结果上报接口可自行进行逻辑处理。</p><div class=prism-codeblock><pre id=b3696df class=language-ts>
  <code>import cloud from &#39;@lafjs/cloud&#39;

export default async function (ctx: FunctionContext) {
  const { token, responseData } = ctx.body
  
  const total = responseData.reduce((sum,item) =&gt; sum &#43; item.price,0)
  const amount = total / 100000

  // 省略数据库操作

  return { }
}</code>
  </pre></div></div></div><h3 id=2-配置校验地址>2. 配置校验地址 <a href=#2-%e9%85%8d%e7%bd%ae%e6%a0%a1%e9%aa%8c%e5%9c%b0%e5%9d%80 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p>我们随便复制3个地址中一个接口: <code>https://d8dns0.laf.dev/shareAuth/finish</code>, 去除<code>/shareAuth/finish</code>后填入<code>身份校验</code>:<code>https://d8dns0.laf.dev</code></p><p><img src=https://cdn.jsdelivr.us/gh/yangchuansheng/fastgpt-imgs@main/imgs/share-auth2.jpg alt loading=lazy></p><h3 id=3-修改分享链接参数>3. 修改分享链接参数 <a href=#3-%e4%bf%ae%e6%94%b9%e5%88%86%e4%ba%ab%e9%93%be%e6%8e%a5%e5%8f%82%e6%95%b0 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p>源分享链接：<code>https://share.fastgpt.in/chat/share?shareId=64be36376a438af0311e599c</code></p><p>修改后：<code>https://share.fastgpt.in/chat/share?shareId=64be36376a438af0311e599c&amp;authToken=fastgpt</code></p><h3 id=4-测试效果>4. 测试效果 <a href=#4-%e6%b5%8b%e8%af%95%e6%95%88%e6%9e%9c class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><ol><li>打开源链接或者<code>authToken</code>不等于<code>fastgpt</code>的链接会提示身份错误。</li><li>发送内容中包含你字，会提示内容不合规。</li></ol><h2 id=使用场景>使用场景 <a href=#%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>这个鉴权方式通常是帮助你直接嵌入<code>分享链接</code>到你的应用中，在你的应用打开分享链接前，应做<code>authToken</code>的拼接后再打开。</p><p>除了对接已有系统的用户外，你还可以对接<code>余额</code>功能，通过<code>结果上报</code>接口扣除用户余额，通过<code>对话前校验</code>接口检查用户的余额。</p></div><div class="gitinfo d-flex flex-wrap justify-content-between align-items-center opacity-85 pt-3"><div id=edit-this-page class=mt-1><a href=https://github.com/labring/FastGPT/blob/main/docSite/content/docs/development/openapi/share.md alt=分享链接身份鉴权 rel="noopener noreferrer" target=_blank><span class="me-1 align-text-bottom"><svg width="20" height="20" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="currentcolor"><path d="M16 .396c-8.839.0-16 7.167-16 16 0 7.073 4.584 13.068 10.937 15.183.803.151 1.093-.344 1.093-.772.0-.38-.009-1.385-.015-2.719-4.453.964-5.391-2.151-5.391-2.151-.729-1.844-1.781-2.339-1.781-2.339-1.448-.989.115-.968.115-.968 1.604.109 2.448 1.645 2.448 1.645 1.427 2.448 3.744 1.74 4.661 1.328.14-1.031.557-1.74 1.011-2.135-3.552-.401-7.287-1.776-7.287-7.907.0-1.751.62-3.177 1.645-4.297-.177-.401-.719-2.031.141-4.235.0.0 1.339-.427 4.4 1.641 1.281-.355 2.641-.532 4-.541 1.36.009 2.719.187 4 .541 3.043-2.068 4.381-1.641 4.381-1.641.859 2.204.317 3.833.161 4.235 1.015 1.12 1.635 2.547 1.635 4.297.0 6.145-3.74 7.5-7.296 7.891.556.479 1.077 1.464 1.077 2.959.0 2.14-.02 3.864-.02 4.385.0.416.28.916 1.104.755 6.4-2.093 10.979-8.093 10.979-15.156.0-8.833-7.161-16-16-16z"/></svg></span>编辑此页面</a></div></div></div><div><hr class=doc-hr><div id=doc-nav class=d-print-none><div class="row flex-xl-nowrap"><div class="col-sm-6 pt-2 doc-next"><a href=/docs/development/openapi/dataset/><div class="card h-100 my-1"><div class="card-body py-2"><p class="card-title fs-5 fw-semibold lh-base mb-0"><i class="material-icons align-middle">navigate_before</i> 知识库接口</p><p class="card-text ms-2">FastGPT OpenAPI 知识库接口</p></div></div></a></div><div class="col-sm-6 pt-2 doc-prev"><a class=ms-auto href=/docs/development/custom-models/chatglm2/><div class="card h-100 my-1 text-end"><div class="card-body py-2"><p class="card-title fs-5 fw-semibold lh-base mb-0">接入 ChatGLM2-6B <i class="material-icons align-middle">navigate_next</i></p><p class="card-text me-2">将 FastGPT 接入私有化模型 ChatGLM2-6B</p></div></div></a></div></div></div></div></div></div></div></div><footer class="shadow py-3 d-print-none"><div class="row align-items-center" style=height:90px><div class=col><div class="text-sm-start text-center mx-md-2"><p class=mb-0>© 2024 the FastGPT Authors.</p><p class=github-badge><span class=badge-subject>云操作系统</span><span class="badge-value bg-blue"><a style=color:#fff href=https://sealos.io/ target=_blank>Sealos</a></span>
<span class=badge-subject>云开发</span><span class="badge-value bg-brightgreen"><a style=color:#fff href=https://laf.run target=_blank>Laf</a></span>
<span class=badge-subject>云原生存储</span><span class="badge-value bg-orange"><a style=color:#fff href=https://github.com/labring/sealfs target=_blank>Sealfs</a></span></p><div id=fixed-box><div class=feedback-btn-wrapper><a href=https://fael3z0zfze.feishu.cn/share/base/form/shrcnRxj3utrzjywsom96Px4sud style=text-decoration:none target=_blank><button id=feedback-btn title="Give feedback"><svg class="inline w-5 h-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M18 13V5a2 2 0 00-2-2H4A2 2 0 002 5v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6A1 1 0 015 7zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z" clip-rule="evenodd"/></svg>
<span _msttexthash=6039839 _msthash=295>咨询合作</span></button></a></div></div></div></div></div></footer></main></div></div><button onclick=topFunction() id=back-to-top aria-label="Back to Top Button" class="back-to-top fs-5"><svg width="24" height="24"><path d="M12 10.224l-6.3 6.3-1.38-1.372L12 7.472l7.68 7.68-1.38 1.376z" style="fill:#fff"/></svg></button>
<script>(()=>{var e=document.getElementById("mode");e!==null&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")):(localStorage.setItem("theme","light"),document.documentElement.removeAttribute("data-dark-mode"))}),e.addEventListener("click",()=>{document.documentElement.toggleAttribute("data-dark-mode"),localStorage.setItem("theme",document.documentElement.hasAttribute("data-dark-mode")?"dark":"light")}),localStorage.getItem("theme")==="dark"?document.documentElement.setAttribute("data-dark-mode",""):document.documentElement.removeAttribute("data-dark-mode"))})()</script><script src=/docs/js/bootstrap.58faa4dc6cac13820c8a72b1fdd5d716641b3129ef981b1956fa23d69ad59f180fed6d42cb92030ac272ba85e7f8247d.js integrity=sha384-WPqk3GysE4IMinKx/dXXFmQbMSnvmBsZVvoj1prVnxgP7W1Cy5IDCsJyuoXn+CR9 defer></script>
<script type=text/javascript src=/docs/js/bundle.min.8dfea95f4c5cbd80217eb5463cdb3367836244f2c6b7e02deb3e22b627c1425e73076fb23f1c17b709743968997924a6.js integrity=sha384-jf6pX0xcvYAhfrVGPNszZ4NiRPLGt+At6z4itifBQl5zB2+yPxwXtwl0OWiZeSSm crossorigin=anonymous defer></script>
<script src=https://cdn.jsdelivr.us/npm/medium-zoom/dist/medium-zoom.min.js crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".main-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.8)"})})</script><script>window.addEventListener("DOMContentLoaded",function(){docsearch({container:"#docsearch",appId:"5BEWEMH0YA",apiKey:"14834e919a87217d919d6d881fcacac3",indexName:"fastgpt",placeholder:"搜索",translations:{button:{buttonText:"搜索",buttonAriaLabel:"搜索"},modal:{startScreen:{noRecentSearchesText:"没有最近搜索"},footer:{selectText:"选中",selectKeyAriaLabel:"Enter key",navigateText:"导航",navigateUpKeyAriaLabel:"Arrow up",navigateDownKeyAriaLabel:"Arrow down",closeText:"关闭",closeKeyAriaLabel:"Escape key",searchByText:"搜索提供"},noResultsScreen:{noResultsText:"没有结果：",suggestedQueryText:"试试搜索",reportMissingResultsText:"Believe this query should return results?",reportMissingResultsLinkText:"Let us know."}}}})})</script></body></html>